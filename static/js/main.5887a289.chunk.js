(this["webpackJsonparup-hub"]=this["webpackJsonparup-hub"]||[]).push([[0],{65:function(e,t,n){},66:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(11),i=n.n(o),r=(n(65),n.p,n(66),n(49)),s=n.n(r),l=n(128),u=n(12),j=n(125),d=n(120),h=n(123),b=n(122),f=n(118),m=n(121),O=n(124),g=n(119),p=n(38),v=function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),a=n[0],o=n[1],i=Object(c.useState)([]),r=Object(u.a)(i,2),s=r[0],l=r[1],j=Object(c.useState)(!1),d=Object(u.a)(j,2),h=d[0],b=d[1],f=function(){p.get("https://bmtools.arup.com/calcs/api/mechanical/pwadata/".concat(e.account.userName)).then((function(e){o(e.data.calcs)}))};Object(c.useEffect)((function(){f(),l(a)}),[]),Object(c.useEffect)((function(){var t=setInterval((function(){return p.get("https://bmtools.arup.com/calcs/api/mechanical/pwadata/".concat(e.account.userName)).then((function(e){l(e.data.calcs)})),function(){return clearInterval(t)}}),6e4)}),[]),Object(c.useEffect)((function(){s.length>a.length?Notification.requestPermission().then((function(){new Notification("You have a new Calculation to complete").onclick=function(e){e.preventDefault(),window.open("https://bmtools.arup.com/calcs/mechanical/mycalcs","_blank")}})):s.length<a.length&&Notification.requestPermission().then((function(){new Notification("Well done! You've completed a Calculation, only ".concat(s.length," more to go."))})),console.log(s,a),b(!0)}),[s]),Object(c.useEffect)((function(){!0===h&&(f(),b(!1)),console.log(a,s)}),[h]);return{myCalcs:a,completeCalc:function(e){window.open("https://bmtools.arup.com/calcs/mechanical/project/".concat(e.ProjectCode),"_blank")}}},w=n(116),x=Object(w.a)({table:{}}),k=n(2);function N(e){var t=e.userData,n=v(t),c=n.myCalcs,a=n.completeCalc,o=x();return Object(k.jsx)("div",{children:Object(k.jsx)(f.a,{component:g.a,className:o.table,children:Object(k.jsxs)(d.a,{stickyHeader:!0,size:"small",children:[Object(k.jsxs)(m.a,{children:[Object(k.jsx)(b.a,{children:"Calculation Name"}),Object(k.jsx)(b.a,{children:"Project Name"}),Object(k.jsx)(b.a,{children:"Stage"}),Object(k.jsx)(b.a,{})]}),Object(k.jsx)(h.a,{children:c.map((function(e){return Object(k.jsxs)(O.a,{children:[Object(k.jsx)(b.a,{children:e.calculation}),Object(k.jsx)(b.a,{children:e.JobNameShort}),Object(k.jsx)(b.a,{children:e.stage}),Object(k.jsx)(b.a,{children:Object(k.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){return a(e)},children:"Complete"})})]},e.calculation_id)}))})]})})})}var C=n(38),S=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(c.useEffect)((function(){C.get("https://bmtools.arup.com/bimtracker/api/pwadata/colin.magner@arup.com").then((function(e){console.log("trackers",e.data),a(e.data)}))}),[]),{myTrackers:n}},y=n(129),L=n(130),I=n(127),E=n(126),P=Object(w.a)({accordion:{},table:{width:"100%",margin:"auto",maxHeight:350,overflowY:"auto"}});function B(){var e=S().myTrackers,t=P();return Object(k.jsx)("div",{children:Object(k.jsxs)(y.a,{className:t.accordion,children:[Object(k.jsx)(L.a,{children:Object(k.jsx)(E.a,{children:"My BIM Tracker"})}),Object(k.jsx)(I.a,{children:Object(k.jsx)(f.a,{component:g.a,className:t.table,children:Object(k.jsxs)(d.a,{stickyHeader:!0,size:"small",children:[Object(k.jsxs)(m.a,{children:[Object(k.jsx)(b.a,{children:"Project Name"}),Object(k.jsx)(b.a,{children:"BIM Lead"}),Object(k.jsx)(b.a,{children:"BIM Checker"}),Object(k.jsx)(b.a,{children:"BIM Approver"})]}),Object(k.jsx)(h.a,{children:e.map((function(e){return Object(k.jsxs)(O.a,{children:[Object(k.jsx)(b.a,{children:e.JobNameShort}),Object(k.jsx)(b.a,{children:e.bimLead}),Object(k.jsx)(b.a,{children:e.bimChecker}),Object(k.jsx)(b.a,{children:e.bimApprover})]},e.ProjectCode)}))})]})})})]})})}var M=n(33),T=n.n(M),W=Object(w.a)({weather:{marginRight:"2.5%",marginLeft:"2.5%",width:"100%"}});function D(){var e=W(),t=Object(M.useOpenWeather)({key:"358605fae728877709ed3e99f4764b5c",lat:"52.22314",lon:"1.47539",lang:"en",unit:"metric"}),n=t.data,c=t.isLoading,a=t.errorMessage;return Object(k.jsx)("div",{className:e.weather,children:Object(k.jsx)(T.a,{isLoading:c,errorMessage:a,data:n,lang:"en",locationLabel:"Arup Campus",unitsLabels:{temperature:"C",windSpeed:"Km/h"},showForecast:!1})})}Object(w.a)({news:{width:900,height:500,marginTop:50,marginBottom:50,margin:"auto"}});var A=Object(w.a)({loginScreen:{margin:"auto",marginTop:"20%"},calcGrid:{marginLeft:"2.5%",marginRight:"1.25%",width:"55%"},weatherGrid:{marginLeft:"1.25%",marginRight:"2.5%",width:"35%"}});function H(){var e=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(!1),i=Object(u.a)(o,2),r=i[0],s=i[1],l=Object(c.useState)([]),j=Object(u.a)(l,2),d=j[0],h=j[1],b=function(){Notification.requestPermission().then((function(){new Notification("You have 4 new calculations to complete, click to view").onclick=function(e){e.preventDefault(),window.open("https://bmtools.arup.com/calcs/mechanical/project/demo","_blank")}}))};return Object(c.useEffect)((function(){n&&(console.log("timed notification"),b(),a(!1))}),[n]),{handleNotification:b,loggedIn:r,authHandler:function(e,t){console.log(e,t),t&&(h(t),s(!0))},userData:d}}(),t=(e.handleNotification,e.loggedIn),n=e.authHandler,a=e.userData,o=A();return Object(k.jsxs)("div",{children:[!t&&Object(k.jsx)(s.a,{clientId:"2b4cf606-ac2c-4532-a7b0-483d7f2427cc",authCallback:n,className:o.loginScreen}),t&&Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:"Arup Hub"}),Object(k.jsxs)(l.a,{container:!0,direction:"row",children:[Object(k.jsx)(l.a,{item:!0,className:o.calcGrid,children:Object(k.jsx)(N,{userData:a})}),Object(k.jsx)(l.a,{item:!0,className:o.weatherGrid,children:Object(k.jsx)(D,{})})]}),Object(k.jsx)(B,{})]})]})}var F=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(H,{})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,132)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),o(e),i(e)}))},J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all "),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(F,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");J?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):R(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service ")}))):R(t,e)}))}}(),G()}},[[92,1,2]]]);
//# sourceMappingURL=main.5887a289.chunk.js.map