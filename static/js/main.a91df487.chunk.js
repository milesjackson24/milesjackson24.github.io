(this["webpackJsonparup-hub"]=this["webpackJsonparup-hub"]||[]).push([[0],{136:function(e,t,a){"use strict";(function(e){var c=a(9),n=a(1),o=a(40),r=a.n(o),s=a(137);a(199),a(200),a(201),a(202);t.a=function(){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),j=Object(c.a)(l,2),d=j[0],b=j[1],h=Object(n.useState)([]),m=Object(c.a)(h,2),u=m[0],p=m[1],O=Object(n.useState)(""),x=Object(c.a)(O,2),g=x[0],f=x[1],v=Object(n.useState)(localStorage.getItem("selectedBackground")?localStorage.getItem("selectedBackground"):s.a),k=Object(c.a)(v,2),S=k[0],C=k[1],N=Object(n.useState)(""),w=Object(c.a)(N,2),_=w[0];w[1];Object(n.useEffect)((function(){r.a.post("https://login.microsoftonline.com/4ae48b41-0137-4599-8661-fc641fe77bea/oauth2/token",{data:{client_id:"48737b9c-5041-4880-b9b3-0e58e74bd446",grant_type:"password",username:"SVC-ADS-GBEMProjectTracker@arup.com",password:"bCY5TcmiGH4bxIR4d52SOkXFxMX32WW2Sg4KNYOnHZtDA7Z99VM64Sp8XzHiJ5IE0ALwIDArD2rSFvbEbgn1e21LgdkJJl0yLfq4SH05FHkgpby3p8hGMxZ2a4pyoW4",resource:"https://arup.onmicrosoft.com/AIS",client_secret:"YaQ7Q~TJax-NzCQQPPCgIH.aEESaicGrGhH4M"}},{headers:{"Access-Control-Allow-Origin":"*",mode:"no-cors"}}).then((function(e){console.log("post",e)}))}),[]);var y=function(){Notification.requestPermission().then((function(){new Notification("You have 4 new calculations to complete, click to view").onclick=function(e){e.preventDefault(),window.open("https://bmtools.arup.com/calcs/mechanical/project/demo","_blank")}}))};return Object(n.useEffect)((function(){if(o){console.log("timed notification"),y(),i(!1)}}),[o]),{handleNotification:y,loggedIn:d,authHandler:function(t,a){console.log(t,a),a&&(r.a.get("https://graph.microsoft.com/v1.0/me/photo/$value",{cache:!0,responseType:"arraybuffer",headers:{Authorization:"Bearer "+a.accessToken}}).then((function(t){var a="data:image/jpeg;base64,"+e.from(t.data,"binary").toString("base64");f(a)})),p(a),b(!0))},userData:u,userImgData:g,selectedBackground:S,setSelectedBackground:C,adsToken:_}}}).call(this,a(177).Buffer)},137:function(e,t,a){"use strict";t.a=a.p+"static/media/Lemons.25a0929a.png"},172:function(e,t,a){},173:function(e,t,a){},199:function(e,t,a){"use strict";a.p},200:function(e,t,a){"use strict";a.p},201:function(e,t,a){"use strict";a.p},202:function(e,t,a){"use strict"},208:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),o=a(32),r=a.n(o),s=(a(172),a.p,a(173),a(135)),i=a.n(s),l=a(275),j=a(304),d=a(297),b=a(136),h=a(290),m=a(285),u=a(288),p=a(287),O=a(283),x=a(286),g=a(289),f=a(284),v=a(276),k=a(294),S=a(43),C=a.n(S),N=a(9),w=a(40),_=function(e){var t=Object(c.useState)([]),a=Object(N.a)(t,2),n=a[0],o=a[1],r=Object(c.useState)([]),s=Object(N.a)(r,2),i=s[0],l=s[1],j=Object(c.useState)(!1),d=Object(N.a)(j,2),b=d[0],h=d[1],m=function(){w.get("https://bmtools.arup.com/calcs/api/mechanical/pwadata/".concat(e.account.userName)).then((function(e){o(e.data.calcs)}))};Object(c.useEffect)((function(){m(),l(n)}),[]),Object(c.useEffect)((function(){var t=setInterval((function(){return w.get("https://bmtools.arup.com/calcs/api/mechanical/pwadata/".concat(e.account.userName)).then((function(e){l(e.data.calcs)})),function(){return clearInterval(t)}}),6e4)}),[]),Object(c.useEffect)((function(){i.length>n.length?Notification.requestPermission().then((function(){new Notification("You have a new Calculation to complete").onclick=function(e){e.preventDefault(),window.open("https://bmtools.arup.com/calcs/mechanical/mycalcs","_blank")}})):i.length<n.length&&Notification.requestPermission().then((function(){new Notification("Well done! You've completed a Calculation, only ".concat(i.length," more to go."))})),console.log(i,n),h(!0)}),[i]),Object(c.useEffect)((function(){!0===b&&(m(),h(!1)),console.log(n,i)}),[b]);return{myCalcs:n,completeCalc:function(e){window.open("https://bmtools.arup.com/calcs/mechanical/project/".concat(e.ProjectCode),"_blank")}}},y=a(273),P=Object(y.a)({table:{maxHeight:400,overflowY:"auto"},helpIcon:{color:"#28aae1",paddingTop:5},helpTooltipSpan:{maxWidth:50,fontSize:12}}),I=a(0);function B(e){var t=e.userData,a=_(t),c=a.myCalcs,n=a.completeCalc,o=P();return Object(I.jsxs)("div",{children:[Object(I.jsxs)(l.a,{container:!0,direction:"row",alignItems:"center",children:[Object(I.jsx)(l.a,{item:!0,xs:11,children:Object(I.jsx)(v.a,{variant:"h6",children:"Calc Centre"})}),Object(I.jsx)(l.a,{item:!0,xs:1,children:Object(I.jsx)(k.a,{title:Object(I.jsx)("span",{className:o.helpTooltipSpan,children:"This Card contains calculations that have been assigned to you and not yet marked as completed. Click on a calculation to be taken to the Calculation Tracker and begin work."}),placement:"bottom-end",children:Object(I.jsx)(C.a,{fontSize:"small",className:o.helpIcon})})})]}),c.length>0?Object(I.jsx)(O.a,{component:f.a,className:o.table,children:Object(I.jsxs)(m.a,{stickyHeader:!0,size:"small",children:[Object(I.jsxs)(x.a,{children:[Object(I.jsx)(p.a,{children:"Calculation Name"}),Object(I.jsx)(p.a,{children:"Project Name"}),Object(I.jsx)(p.a,{children:"Stage"}),Object(I.jsx)(p.a,{})]}),Object(I.jsx)(u.a,{children:c.map((function(e){return Object(I.jsxs)(g.a,{children:[Object(I.jsx)(p.a,{children:e.calculation}),Object(I.jsx)(p.a,{children:e.JobNameShort}),Object(I.jsx)(p.a,{children:e.stage}),Object(I.jsx)(p.a,{children:Object(I.jsx)(h.a,{variant:"contained",color:"primary",onClick:function(){return n(e)},children:"Complete"})})]},e.calculation_id)}))})]})}):Object(I.jsxs)(v.a,{variant:"body2",children:["It looks like you don't have any calculations to Complete. ",Object(I.jsx)("br",{}),"Visit the Calc Tracker and check back later.",Object(I.jsx)("br",{}),Object(I.jsx)("a",{href:"https://bmtools.arup.com/calcs/mechanical",target:"_blank",rel:"noreferrer",children:"Mechanical"})," |\xa0",Object(I.jsx)("a",{href:"https://bmtools.arup.com/calcs/electrical",target:"_blank",rel:"noreferrer",children:"Electrical"})," |\xa0",Object(I.jsx)("a",{href:"https://bmtools.arup.com/calcs/structural",target:"_blank",rel:"noreferrer",children:"Structural"})]})]})}var R=a(295),T=a(305),A=a(61),M=a(40),D=a(299),E=a(291),H=a(292),L=a(76),z=a.n(L),W=a(62),F=a.n(W),G=a(107),Y=a.n(G),J=a(77),U=a.n(J),K=a(108),V=a.n(K),q=a(109),Q=a.n(q),X=a(35),Z=a.n(X),$=a(36),ee=a.n($),te=a(106),ae=a.n(te),ce=Object(y.a)({table:{maxWidth:"100%",margin:"auto",maxHeight:350,overflowY:"auto"},cellRed:{color:"#ff0000"},cellAmber:{color:"#FFBF00"},cellGreen:{color:"#00FF00"},cellYellow:{color:"#FFFF00"},tableHeader:{fontWeight:"bold"},jobNameCell:{width:200,cursor:"pointer"},projectCodeCell:{width:50,paddingRight:0,cursor:"pointer"},iconHeader:{paddingTop:0,paddingBottom:0,paddingLeft:5,paddingRight:5},iconCell:{paddingTop:0,paddingBottom:0,paddingLeft:5,paddingRight:5,cursor:"pointer"},healthCell:{},accordionContainer:{maxHeight:400,overflowY:"auto"},accordionProjectStatus:{paddingRight:20},subtitle:{paddingLeft:"3%",paddingTop:"1%"},helpIcon:{color:"#28aae1",paddingTop:5},helpTooltipSpan:{maxWidth:100,fontSize:12}});function ne(e){e.userData;var t=function(e){var t=Object(c.useState)([]),a=Object(N.a)(t,2),n=a[0],o=a[1],r=Object(c.useState)([]),s=Object(N.a)(r,2),i=s[0],l=s[1],j=Object(c.useState)([]),d=Object(N.a)(j,2),b=d[0],h=d[1],m=Object(c.useState)(!1),u=Object(N.a)(m,2),p=u[0],O=u[1],x=function(){M.get("https://bmtools.arup.com/bimtracker/api/allrecords/all").then((function(e){g(e.data)}))},g=function(e){var t=e.map((function(e){var t=!1,a=!1,c=!1,n=!1;return e.Approver_B_name&&e.Checker_B_name&&e.CoordinationManager&&e.Engineer_B_name&&(t=!0),e.storage_CDE&&e.storage_C_Models&&e.storage_Clarity_BIM_360_Backup&&e.storage_MEP_Models&&e.storage_S_Models&&(a=!0),e.process_BEP_Status&&e.process_EIR_Status&&e.process_Information_Deliverables&&e.process_Responsibility_Matrix_Status&&(c=!0),e.coordination_Internal_Coord_Meetings&&e.coordination_Issue_Tracking&&e.coordination_Whole_Team_Coord_Meetings&&(n=!0),Object(A.a)(Object(A.a)({},e),{},{completePeople:t,completeStorage:a,completeProcess:c,completeCoordination:n})}));o(t)};return Object(c.useEffect)((function(){x();var e=setInterval((function(){x()}),6e4);return function(){return clearInterval(e)}}),[]),Object(c.useEffect)((function(){if(n.length>0){var e=[],t=[];n.map((function(a){"Colin Magner"===a.Engineer_B_name&&e.push(a),"Colin Magner"!==a.Checker_B_name&&"Colin Magner"!==a.Approver_B_name||t.push(a)})),l(e),h(t)}}),[n]),{myRecords:n,bimLeadRecords:i,bimCheckerApproverRecords:b,handleExpandTables:function(){O(!p)},expandTables:p,handleOpenProject:function(e){var t="https://bmtools.arup.com/bimtracker?projectFilter="+e;window.open(t)},handleOpenProjectDiscipline:function(e,t){var a="https://bmtools.arup.com/bimtracker?projectFilter="+e+"&discipline="+t;window.open(a)}}}(),a=(t.myRecords,t.bimLeadRecords),n=t.bimCheckerApproverRecords,o=(t.handleExpandTables,t.expandTables,t.handleOpenProject,t.handleOpenProjectDiscipline),r=ce();return Object(I.jsxs)("div",{children:[Object(I.jsxs)(l.a,{container:!0,direction:"row",alignItems:"center",children:[Object(I.jsx)(l.a,{item:!0,xs:11,children:Object(I.jsx)(v.a,{variant:"h6",children:"BIM Reviewer"})}),Object(I.jsx)(l.a,{item:!0,xs:1,children:Object(I.jsx)(k.a,{title:Object(I.jsx)("span",{className:r.helpTooltipSpan,children:"This Card contains relevant progress information for your BIM projects, open the tabs and click on any ticks or crosses to be taken to the relevant section of the BIM Tracker. You'll find more tooltips throughout, that provide explanations where needed."}),placement:"bottom-end",children:Object(I.jsx)(C.a,{fontSize:"small",className:r.helpIcon})})})]}),Object(I.jsxs)("div",{className:r.accordionContainer,children:[n.length>0&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{variant:"subtitle1",align:"left",className:r.subtitle,children:"I'm a Checker or Approver:"}),n.map((function(e){return Object(I.jsxs)(D.a,{children:[Object(I.jsxs)(E.a,{expandIcon:Object(I.jsx)(ae.a,{fontSize:"small"}),children:[Object(I.jsx)("div",{className:r.accordionProjectStatus,children:Object(I.jsx)(k.a,{placement:"top",title:100-e.projectStatus<0?"0%":100-e.projectStatus+"%",children:Object(I.jsx)(z.a,{fontSize:"small",className:100-e.projectStatus<51?r.cellRed:100-e.projectStatus<76?r.cellAmber:100-e.projectStatus<100?r.cellYellow:r.cellGreen})})}),Object(I.jsxs)(v.a,{variant:"body2",sx:{width:"90%"},children:[e.PCode," ",e.JobNameShort]})]}),Object(I.jsx)(H.a,{children:Object(I.jsxs)(m.a,{children:[Object(I.jsxs)(x.a,{children:[Object(I.jsx)(p.a,{className:r.iconHeader,children:Object(I.jsx)(k.a,{title:"People",placement:"top",children:Object(I.jsx)(F.a,{})})}),Object(I.jsx)(p.a,{className:r.iconHeader,children:Object(I.jsx)(k.a,{title:"Storage",placement:"top",children:Object(I.jsx)(Y.a,{})})}),Object(I.jsx)(p.a,{className:r.iconHeader,children:Object(I.jsx)(k.a,{title:"Process",placement:"top",children:Object(I.jsx)(U.a,{})})}),Object(I.jsx)(p.a,{className:r.iconHeader,children:Object(I.jsx)(k.a,{title:"Coordination",placement:"top",children:Object(I.jsx)(V.a,{})})}),Object(I.jsx)(p.a,{className:r.iconHeader,children:Object(I.jsx)(k.a,{title:"Automation",placement:"top",children:Object(I.jsx)(Q.a,{})})}),Object(I.jsx)(p.a,{className:r.tableHeader,children:"Last Updated"})]}),Object(I.jsx)(u.a,{children:Object(I.jsxs)(g.a,{children:[Object(I.jsx)(p.a,{className:r.iconCell,onClick:function(){return o(e.PCode,"people")},children:e.completePeople?Object(I.jsx)(Z.a,{}):Object(I.jsx)(ee.a,{})}),Object(I.jsx)(p.a,{className:r.iconCell,onClick:function(){return o(e.PCode,"storage")},children:e.completeStorage?Object(I.jsx)(Z.a,{}):Object(I.jsx)(ee.a,{})}),Object(I.jsx)(p.a,{className:r.iconCell,onClick:function(){return o(e.PCode,"process")},children:e.completeProcess?Object(I.jsx)(Z.a,{}):Object(I.jsx)(ee.a,{})}),Object(I.jsx)(p.a,{className:r.iconCell,onClick:function(){return o(e.PCode,"coordination")},children:e.completeCoordination?Object(I.jsx)(Z.a,{}):Object(I.jsx)(ee.a,{})}),Object(I.jsx)(p.a,{className:r.iconCell,onClick:function(){return o(e.PCode,"automation")},children:e.automation_Clarity_Nightly_Exports?Object(I.jsx)(Z.a,{}):Object(I.jsx)(ee.a,{})}),Object(I.jsx)(p.a,{children:e.updated_at?Object(R.a)(Object(T.a)(e.updated_at))+" ago":"No data"})]})})]})})]})}))]}),a.length>0&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{variant:"subtitle1",align:"left",className:r.subtitle,children:"I'm a BIM Lead:"}),a.map((function(e){return Object(I.jsxs)(D.a,{children:[Object(I.jsxs)(E.a,{expandIcon:Object(I.jsx)(ae.a,{fontSize:"small"}),children:[Object(I.jsx)("div",{className:r.accordionProjectStatus,children:Object(I.jsx)(k.a,{placement:"top",title:100-e.projectStatus<0?"0%":100-e.projectStatus+"%",children:Object(I.jsx)(z.a,{fontSize:"small",className:100-e.projectStatus<51?r.cellRed:100-e.projectStatus<76?r.cellAmber:100-e.projectStatus<100?r.cellYellow:r.cellGreen})})}),Object(I.jsxs)(v.a,{variant:"body2",children:[e.PCode," ",e.JobNameShort]})]}),Object(I.jsx)(H.a,{children:Object(I.jsxs)(m.a,{children:[Object(I.jsxs)(x.a,{children:[Object(I.jsx)(p.a,{className:r.iconHeader,children:Object(I.jsx)(k.a,{title:"People",placement:"top",children:Object(I.jsx)(F.a,{})})}),Object(I.jsx)(p.a,{className:r.iconHeader,children:Object(I.jsx)(k.a,{title:"Storage",placement:"top",children:Object(I.jsx)(Y.a,{})})}),Object(I.jsx)(p.a,{className:r.iconHeader,children:Object(I.jsx)(k.a,{title:"Process",placement:"top",children:Object(I.jsx)(U.a,{})})}),Object(I.jsx)(p.a,{className:r.iconHeader,children:Object(I.jsx)(k.a,{title:"Coordination",placement:"top",children:Object(I.jsx)(V.a,{})})}),Object(I.jsx)(p.a,{className:r.iconHeader,children:Object(I.jsx)(k.a,{title:"Automation",placement:"top",children:Object(I.jsx)(Q.a,{})})}),Object(I.jsx)(p.a,{className:r.tableHeader,children:"Last Updated"})]}),Object(I.jsx)(u.a,{children:Object(I.jsxs)(g.a,{children:[Object(I.jsx)(p.a,{className:r.iconCell,onClick:function(){return o(e.PCode,"people")},children:e.completePeople?Object(I.jsx)(Z.a,{}):Object(I.jsx)(ee.a,{})}),Object(I.jsx)(p.a,{className:r.iconCell,onClick:function(){return o(e.PCode,"storage")},children:e.completeStorage?Object(I.jsx)(Z.a,{}):Object(I.jsx)(ee.a,{})}),Object(I.jsx)(p.a,{className:r.iconCell,onClick:function(){return o(e.PCode,"process")},children:e.completeProcess?Object(I.jsx)(Z.a,{}):Object(I.jsx)(ee.a,{})}),Object(I.jsx)(p.a,{className:r.iconCell,onClick:function(){return o(e.PCode,"coordination")},children:e.completeCoordination?Object(I.jsx)(Z.a,{}):Object(I.jsx)(ee.a,{})}),Object(I.jsx)(p.a,{className:r.iconCell,onClick:function(){return o(e.PCode,"automation")},children:e.automation_Clarity_Nightly_Exports?Object(I.jsx)(Z.a,{}):Object(I.jsx)(ee.a,{})}),Object(I.jsx)(p.a,{children:e.updated_at?Object(R.a)(Object(T.a)(e.updated_at))+" ago":"No data"})]})})]})})]},e.PCode)}))]})]}),0===a.length&&0===n.length&&Object(I.jsxs)(v.a,{variant:"body2",children:["It looks like you aren't on any BIM Projects",Object(I.jsx)("br",{}),"Visit the BIM Tracker ",Object(I.jsx)("a",{href:"https://bmtools.arup.com/bimtracker/",target:"_blank",rel:"noreferrer",children:"here"})," and check back later."]})]})}a(110),Object(y.a)({weather:{marginRight:"2.5%",marginLeft:"2.5%",width:"100%"}});var oe=Object(y.a)({news:{width:900,height:500,marginTop:50,marginBottom:50,margin:"auto"}}),re=a(306);function se(){oe();return Object(I.jsxs)("div",{children:[Object(I.jsx)(v.a,{variant:"h6",children:"Arup News"}),Object(I.jsx)("br",{}),Object(I.jsx)(v.a,{variant:"body2",children:"This component will contain UKIMEA, BEM & Skills Network news"}),Object(I.jsx)(v.a,{variant:"body2",children:"Currently Under Construction"}),Object(I.jsx)(re.a,{sx:{height:200}})]})}var ie=a(307),le=a(309),je=a(310),de=a(296),be=a(311),he=a(298),me=a(303),ue=a(313),pe=a(302),Oe=a(312),xe=a(301),ge=Object(y.a)({box:{marginBottom:15},toolbar:{backgroundColor:"#e3e3e3"},title:{color:"black"},headerGrid:{paddingLeft:0},popover:{minWidth:200,paddingBottom:5},backgroundForm:{paddingLeft:"3%"},userAvatar:{paddingLeft:5,paddingTop:5},popoverButton:{}});function fe(e){var t=ge(),a=e.userData,n=e.userImgData,o=e.selectedBackground,r=function(e,t){var a=Object(c.useState)(null),n=Object(N.a)(a,2),o=n[0],r=n[1];return{togglePopover:function(e){r(e.currentTarget)},popoverOpen:Boolean(o),closePopover:function(){r(null)},anchorEl:o,handleChangeBackground:function(e){t(e.target.value),localStorage.setItem("selectedBackground",e.target.value)}}}(0,e.setSelectedBackground),s=r.togglePopover,i=r.popoverOpen,j=r.closePopover,d=r.anchorEl,b=r.handleChangeBackground;return Object(I.jsx)(re.a,{sx:{flexGrow:1},className:t.box,children:Object(I.jsx)(ie.a,{position:"fixed",style:{backgroundColor:"#e3e3e3"},children:Object(I.jsx)(le.a,{className:t.toolbar,disableGutters:!0,children:Object(I.jsxs)(l.a,{container:!0,children:[Object(I.jsx)(l.a,{item:!0,xs:4}),Object(I.jsx)(l.a,{item:!0,xs:4,children:Object(I.jsx)(je.a,{variant:"h4",className:t.title,children:"My Hub"})}),Object(I.jsx)(l.a,{item:!0,xs:2}),Object(I.jsxs)(l.a,{item:!0,xs:2,children:[Object(I.jsx)(be.a,{onClick:s,variant:"contained",className:t.popoverButton,startIcon:Object(I.jsx)(F.a,{}),children:"Account"}),Object(I.jsxs)(de.a,{open:i,anchorEl:d,onClose:j,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},className:t.popover,disableScrollLock:!0,children:[Object(I.jsxs)(l.a,{container:!0,alignItems:"center",className:t.popover,children:[Object(I.jsx)(l.a,{item:!0,xs:4,children:n?Object(I.jsx)(xe.a,{src:n,sx:{width:50,height:50},className:t.userAvatar}):Object(I.jsx)(F.a,{fontSize:"large",className:t.userAvatar})}),Object(I.jsxs)(l.a,{item:!0,xs:8,children:[Object(I.jsx)(je.a,{children:a.displayName}),Object(I.jsx)(je.a,{children:a.officeLocation})]})]}),Object(I.jsx)(Oe.a,{}),Object(I.jsx)("div",{className:t.backgroundForm,children:Object(I.jsxs)(pe.a,{component:"fieldset",children:[Object(I.jsx)(je.a,{children:"Background Wallpaper"}),Object(I.jsxs)(me.a,{"aria-label":"background",name:"controlled-radio-buttons-group",value:o,onChange:b,children:[Object(I.jsx)(ue.a,{value:"/static/media/Lemons.25a0929a.png",control:Object(I.jsx)(he.a,{}),label:"Lemons"}),Object(I.jsx)(ue.a,{value:"/static/media/Cosmos.c6c9718e.png",control:Object(I.jsx)(he.a,{}),label:"Cosmos"}),Object(I.jsx)(ue.a,{value:"/static/media/Koi.a797714b.png",control:Object(I.jsx)(he.a,{}),label:"Koi"}),Object(I.jsx)(ue.a,{value:"/static/media/Circuit.6d04891f.png",control:Object(I.jsx)(he.a,{}),label:"Circuit"})]})]})})]})]})]})})})})}var ve=a(40),ke=function(e){var t=Object(c.useState)([]),a=Object(N.a)(t,2),n=a[0],o=a[1],r=Object(c.useState)(!0),s=Object(N.a)(r,2),i=s[0],l=s[1],j=function(e){var t=[];e.currentData.map((function(e){Object.values(e).includes("Colin Magner")&&t.push(e)})),o(t)};return Object(c.useEffect)((function(){l(!0),ve.get("https://projectapprovalstracker.arup.com/api/getpwadata").then((function(e){j(e.data)}))}),[]),Object(c.useEffect)((function(){n.length>0&&(n.map((function(e){var t=[];for(var a in e)if("Colin Magner"===e[a]){var c="";switch(a){case"Approver_B_name":c="Approver BIM";break;case"Approver_C_name":c="Approver Civil";break;case"Approver_E_name":c="Approver Electrical";break;case"Approver_M_name":c="Approver Mechanical";break;case"Approver_P_name":c="Approver Public Health";break;case"Approver_S_name":c="Approver Structural";break;case"Checker_B_name":c="Checker BIM";break;case"Checker_C_name":c="Checker Civil";break;case"Checker_E_name":c="Checker Electrical";break;case"Checker_M_name":c="Checker Mechanical";break;case"Checker_P_name":c="Checker Public Health";break;case"Checker_S_name":c="Checker Structural";break;case"Engineer_B_name":c="Lead BIM";break;case"Engineer_C_name":c="Lead Civil";break;case"Engineer_E_name":c="Lead Electrical";break;case"Engineer_M_name":c="Lead Mechanical";break;case"Engineer_P_name":c="Lead Public Health";break;case"Engineer_S_name":c="Lead Structural";break;case"ProjectDirectorName":c="Project Director";break;case"ProjectManagerName":c="Project Manager";break;default:c=a}t.push(c)}e.myRoles=t})),o(n),l(!1))}),[n]),{myProjects:n,loading:i}},Se=a(315),Ce=a(319),Ne=a(318),we=a(314),_e=a(316),ye=a(317),Pe=Object(y.a)({titleCell:{maxWidth:150,cursor:"pointer"},titleTooltip:{},helpIcon:{color:"#28aae1",paddingTop:5},helpTooltipSpan:{maxWidth:100,fontSize:12},table:{maxHeight:400,overflowY:"auto"}});function Ie(e){e.userData;var t=ke(),a=t.myProjects,c=t.loading,n=Pe();return Object(I.jsxs)("div",{children:[Object(I.jsxs)(l.a,{container:!0,direction:"row",alignItems:"center",children:[Object(I.jsx)(l.a,{item:!0,xs:11,children:Object(I.jsx)(v.a,{variant:"h6",children:"Project Role Tracker"})}),Object(I.jsx)(l.a,{item:!0,xs:1,children:Object(I.jsx)(k.a,{title:Object(I.jsx)("span",{className:n.helpTooltipSpan,children:"This Card contains your projects and the role that you are fulfilling."}),placement:"bottom-end",children:Object(I.jsx)(C.a,{fontSize:"small",className:n.helpIcon})})})]}),!c&&a.length>0&&Object(I.jsx)(we.a,{component:f.a,className:n.table,children:Object(I.jsxs)(Se.a,{stickyHeader:!0,size:"small",children:[Object(I.jsx)(_e.a,{children:Object(I.jsxs)(ye.a,{children:[Object(I.jsx)(Ne.a,{children:"Project Name"}),Object(I.jsx)(Ne.a,{children:"My Roles"})]})}),Object(I.jsx)(Ce.a,{children:a.map((function(e){return Object(I.jsxs)(ye.a,{children:[Object(I.jsx)(Ne.a,{className:n.titleCell,children:Object(I.jsx)(k.a,{title:e.JobNameShort,placement:"top",className:n.titleTooltip,enterDelay:400,children:Object(I.jsx)(v.a,{variant:"body2",noWrap:!0,children:e.JobNameShort})})}),Object(I.jsx)(Ne.a,{children:e.myRoles.map((function(e){return e})).join(", ")})]},e.ProjectCode)}))})]})}),0===a.length&&Object(I.jsxs)(v.a,{variant:"body2",children:["It looks like you aren't on any Projects ",Object(I.jsx)("br",{}),"Visit the Project Tracker ",Object(I.jsx)("a",{href:"https://projectapprovalstracker.arup.com/",target:"_blank",rel:"noreferrer",children:"here"})," and check back later."]})]})}function Be(){return Object(I.jsxs)("div",{children:[Object(I.jsx)(v.a,{variant:"h6",children:Object(I.jsx)("b",{children:"Welcome to your Hub"})}),Object(I.jsx)(v.a,{variant:"subtitle1",align:"left",style:{marginLeft:"3%"},children:"Changelog:"}),Object(I.jsxs)(v.a,{variant:"body2",align:"left",style:{marginLeft:"5%"},children:[Object(I.jsx)("b",{children:"02/11/21"}),Object(I.jsx)("br",{}),Object(I.jsx)("b",{children:"-"})," Styles Overhaul! It's all so shiny!",Object(I.jsx)("br",{}),Object(I.jsx)("b",{children:"-"})," '?' tips added to each card",Object(I.jsx)("br",{}),Object(I.jsx)("b",{children:"01/11/21"}),Object(I.jsx)("br",{}),Object(I.jsx)("b",{children:"-"})," Added Project Role Tracker ",Object(I.jsx)("br",{}),Object(I.jsx)("b",{children:"-"})," Backgrounds are available in the Account tab! Spice up your hub now!",Object(I.jsx)("br",{})]})]})}function Re(){return Object(I.jsxs)("div",{children:[Object(I.jsx)(v.a,{variant:"h6",children:"Coming Soon"}),Object(I.jsx)("br",{}),Object(I.jsx)(v.a,{variant:"body2",children:"Trackers such as 30 day review, PM/PD tools and more"}),Object(I.jsx)(v.a,{variant:"body2",children:"Possible PaT integration. Plan your time from your Desktop!"}),Object(I.jsx)(re.a,{sx:{height:200}})]})}var Te=a(152),Ae=a(214),Me=a(141),De=a.n(Me),Ee=a(140),He=a.n(Ee),Le=a(146),ze=a.n(Le),We=a(147),Fe=a.n(We),Ge=a(148),Ye=a.n(Ge),Je=a(149),Ue=a.n(Je),Ke=a(142),Ve=a.n(Ke),qe=a(144),Qe=a.n(qe),Xe=a(145),Ze=a.n(Xe),$e=a(143),et=a.n($e),tt=a(40),at=a.n(tt),ct=function(e,t){var a=Object(c.useState)([{projectNo:"28433100",SetupSection:"Ok",DeliverySection:"Critical",AgreementsSection:"Ok",MonitoringSection:"Ok",ReviewsSection:"Warning",ImprovementSection:"na",messages:[{name:"setupReason",message:"Setup not done"},{name:"contractsReason",message:"contract complete"},{name:"feedback reason",message:""}]},{projectNo:"28365300",SetupSection:"Warning",DeliverySection:"Ok",AgreementsSection:"Ok",MonitoringSection:"Critical",ReviewsSection:"Warning",ImprovementSection:"na",messages:[{name:"setupReason",message:"Setup not done"},{name:"contractsReason",message:"contract complete"},{name:"feedback reason",message:""}]},{projectNo:"28365300",SetupSection:"Warning",DeliverySection:"Ok",AgreementsSection:"Ok",MonitoringSection:"Critical",ReviewsSection:"Warning",ImprovementSection:"na",messages:[{name:"setupReason",message:"Setup not done"},{name:"contractsReason",message:"contract complete"},{name:"feedback reason",message:""}]},{projectNo:"28365300",SetupSection:"Warning",DeliverySection:"Ok",AgreementsSection:"Ok",MonitoringSection:"Critical",ReviewsSection:"Warning",ImprovementSection:"na",messages:[{name:"setupReason",message:"Setup not done"},{name:"contractsReason",message:"contract complete"},{name:"feedback reason",message:""}]},{projectNo:"28365300",SetupSection:"Warning",DeliverySection:"Ok",AgreementsSection:"Ok",MonitoringSection:"Critical",ReviewsSection:"Warning",ImprovementSection:"na",messages:[{name:"setupReason",message:"Setup not done"},{name:"contractsReason",message:"contract complete"},{name:"feedback reason",message:""}]},{projectNo:"28365300",SetupSection:"Warning",DeliverySection:"Ok",AgreementsSection:"Ok",MonitoringSection:"Critical",ReviewsSection:"Warning",ImprovementSection:"na",messages:[{name:"setupReason",message:"Setup not done"},{name:"contractsReason",message:"contract complete"},{name:"feedback reason",message:""}]}]),n=Object(N.a)(a,2),o=n[0];n[1];return Object(c.useEffect)((function(){at.a.get("https://adsprapiman.azure-api.net/cds/odata/Projects",{headers:{"ocp-Apim-Subscription-Key":"11deee6460dc4e8da955e1c25725424b",authorization:"Bearer "+t}}).then((function(e){console.log("results: ",e)}))}),[]),{myIPPData:o,buildURL:function(e,t){var a="http://ipp.arup.com/navigator/#"+e+"/"+t+"/1";window.open(a)}}},nt=Object(y.a)({helpIcon:{color:"#28aae1",paddingTop:5},helpTooltipSpan:{maxWidth:50,fontSize:12},tableContainer:{maxHeight:400,overflowY:"auto"},statusCell:{cursor:"pointer"}}),ot=["children","expandComponent"];function rt(e){e.userData;var t=e.adsToken,a=nt(),c=ct(0,t),o=c.myIPPData,r=c.buildURL,s=function(e){var t=e.children,a=e.expandComponent,c=Object(Te.a)(e,ot),o=n.a.useState(!1),r=Object(N.a)(o,2),s=r[0],i=r[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)(g.a,Object(A.a)(Object(A.a)({},c),{},{children:[Object(I.jsx)(p.a,{padding:"checkbox",children:Object(I.jsx)(Ae.a,{onClick:function(){return i(!s)},children:s?Object(I.jsx)(He.a,{fontSize:"small"}):Object(I.jsx)(De.a,{fontSize:"small"})})}),t]})),s&&Object(I.jsxs)(g.a,{children:[Object(I.jsx)(p.a,{padding:"checkbox"}),a]})]})},i=function(e){return"Ok"===e?Object(I.jsx)(Ve.a,{sx:{color:"green"},fontSize:"small"}):"Warning"===e?Object(I.jsx)(et.a,{sx:{color:"#e6e600"},fontSize:"small"}):"Critical"===e?Object(I.jsx)(Qe.a,{sx:{color:"red"},fontSize:"small"}):Object(I.jsx)(Ze.a,{fontSize:"small"})};return Object(I.jsxs)("div",{children:[Object(I.jsxs)(l.a,{container:!0,direction:"row",alignItems:"center",children:[Object(I.jsx)(l.a,{item:!0,xs:11,children:Object(I.jsx)(v.a,{variant:"h6",children:"IPP Dashboard"})}),Object(I.jsx)(l.a,{item:!0,xs:1,children:Object(I.jsx)(k.a,{title:Object(I.jsx)("span",{className:a.helpTooltipSpan,children:"This Card contains a summary of your projects on IPP along with their status and messages. Click on each status icon to go to the relevant section of that project on IPP."}),placement:"bottom-end",children:Object(I.jsx)(C.a,{fontSize:"small",className:a.helpIcon})})})]}),Object(I.jsx)(f.a,{className:a.tableContainer,children:Object(I.jsxs)(m.a,{stickyHeader:!0,children:[Object(I.jsx)(x.a,{children:Object(I.jsxs)(g.a,{children:[Object(I.jsx)(p.a,{}),Object(I.jsx)(p.a,{children:"Job No"}),Object(I.jsx)(p.a,{children:Object(I.jsx)(k.a,{title:"Setup & Admin",placement:"top",children:Object(I.jsx)(U.a,{fontSize:"small"})})}),Object(I.jsx)(p.a,{children:Object(I.jsx)(k.a,{title:"Agreements",placement:"top",children:Object(I.jsx)(ze.a,{fontSize:"small"})})}),Object(I.jsx)(p.a,{children:Object(I.jsx)(k.a,{title:"Project Reviews",placement:"top",children:Object(I.jsx)(Fe.a,{fontSize:"small"})})}),Object(I.jsx)(p.a,{children:Object(I.jsx)(k.a,{title:"Delivery",placement:"top",children:Object(I.jsx)(Ye.a,{fontSize:"small"})})}),Object(I.jsx)(p.a,{children:Object(I.jsx)(k.a,{title:"Monitoring",placement:"top",children:Object(I.jsx)(z.a,{fontSize:"small"})})}),Object(I.jsx)(p.a,{children:Object(I.jsx)(k.a,{title:"Improvement",placement:"top",children:Object(I.jsx)(Ue.a,{fontSize:"small"})})})]})}),Object(I.jsx)(u.a,{children:o.map((function(e){return Object(I.jsxs)(s,{expandComponent:Object(I.jsx)(p.a,{colSpan:"7",children:e.messages.map((function(e){return Object(I.jsxs)(l.a,{container:!0,direction:"row",spacing:2,children:[Object(I.jsx)(l.a,{item:!0,xs:4,children:e.name}),Object(I.jsx)(l.a,{item:!0,xs:8,children:e.message})]})}))}),children:[Object(I.jsx)(p.a,{children:e.projectNo}),Object(I.jsx)(p.a,{onClick:function(){return r(e.projectNo,"setup")},className:a.statusCell,children:i(e.SetupSection)}),Object(I.jsx)(p.a,{onClick:function(){return r(e.projectNo,"agreements")},className:a.statusCell,children:i(e.AgreementsSection)}),Object(I.jsx)(p.a,{onClick:function(){return r(e.projectNo,"reviews")},className:a.statusCell,children:i(e.ReviewsSection)}),Object(I.jsx)(p.a,{onClick:function(){return r(e.projectNo,"delivery")},className:a.statusCell,children:i(e.DeliverySection)}),Object(I.jsx)(p.a,{onClick:function(){return r(e.projectNo,"monitoring")},className:a.statusCell,children:i(e.MonitoringSection)}),Object(I.jsx)(p.a,{onClick:function(){return r(e.projectNo,"improvement")},className:a.statusCell,children:i(e.ImprovementSection)})]},e.projectNo)}))})]})})]})}var st=Object(y.a)({loginScreen:{margin:"auto",marginTop:"20%"},weatherGrid:{marginLeft:"1.25%",marginRight:"2.5%",width:"35%"},spacerDiv:{height:64},content:{marginLeft:"2%",marginRight:"2%"},contentGridRow:{paddingBottom:"1%"},wholePage:{minHeight:"100vh",backgroundSize:"cover"}});function it(){var e=Object(b.a)(),t=(e.handleNotification,e.loggedIn),a=e.authHandler,c=e.userData,n=e.userImgData,o=e.selectedBackground,r=e.setSelectedBackground,s=e.adsToken,h=st();return Object(I.jsxs)("div",{children:[!t&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(d.a,{severity:"warning",children:"Please ensure you are connected to the Arup Network for a full experience"}),Object(I.jsx)(i.a,{clientId:"48737b9c-5041-4880-b9b3-0e58e74bd446",tenantUrl:"https://login.microsoftonline.com/4ae48b41-0137-4599-8661-fc641fe77bea",authCallback:a,className:h.loginScreen,useLocalStorageCache:!0,withUserData:!0})]}),t&&Object(I.jsxs)("div",{className:h.wholePage,style:{backgroundImage:"url(".concat(o,")")},children:[Object(I.jsx)(fe,{userData:c,userImgData:n,selectedBackground:o,setSelectedBackground:r}),Object(I.jsx)("div",{className:h.spacerDiv}),Object(I.jsxs)("div",{className:h.content,children:[Object(I.jsxs)(l.a,{container:!0,direction:"row",spacing:2,className:h.contentGridRow,children:[Object(I.jsx)(l.a,{item:!0,xs:7,children:Object(I.jsx)(j.a,{children:Object(I.jsx)(B,{userData:c})})}),Object(I.jsx)(l.a,{item:!0,xs:5,children:Object(I.jsx)(j.a,{children:Object(I.jsx)(Be,{})})})]}),Object(I.jsxs)(l.a,{container:!0,direction:"row",spacing:2,className:h.contentGridRow,children:[Object(I.jsx)(l.a,{item:!0,xs:7,children:Object(I.jsx)(j.a,{children:Object(I.jsx)(ne,{userData:c})})}),Object(I.jsx)(l.a,{item:!0,xs:5,children:Object(I.jsx)(j.a,{children:Object(I.jsx)(Ie,{userData:c})})})]}),Object(I.jsxs)(l.a,{container:!0,direction:"row",spacing:2,className:h.contentGridRow,children:[Object(I.jsx)(l.a,{item:!0,xs:5,children:Object(I.jsx)(j.a,{children:Object(I.jsx)(se,{})})}),Object(I.jsx)(l.a,{item:!0,xs:7,children:Object(I.jsx)(j.a,{children:Object(I.jsx)(rt,{userData:c,adsToken:s})})})]}),Object(I.jsxs)(l.a,{container:!0,direction:"row",spacing:2,className:h.contentGridRow,children:[Object(I.jsx)(l.a,{item:!0,xs:6,children:Object(I.jsx)(j.a,{children:Object(I.jsx)(Re,{})})}),Object(I.jsx)(l.a,{item:!0,xs:6,children:Object(I.jsx)(j.a,{})})]})]})]})]})}var lt=function(){return Object(I.jsx)("div",{className:"App",children:Object(I.jsx)(it,{})})},jt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,322)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,o=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),o(e),r(e)}))},dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function bt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all "),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(Object(I.jsx)(n.a.StrictMode,{children:Object(I.jsx)(lt,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");dt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var c=a.headers.get("content-type");404===a.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):bt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service ")}))):bt(t,e)}))}}(),jt()}},[[208,1,2]]]);
//# sourceMappingURL=main.a91df487.chunk.js.map