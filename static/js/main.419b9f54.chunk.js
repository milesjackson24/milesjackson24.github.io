(this["webpackJsonparup-hub"]=this["webpackJsonparup-hub"]||[]).push([[0],{47:function(e,n,t){},48:function(e,n,t){},77:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t.n(c),a=t(12),i=t.n(a),r=(t(47),t.p,t(48),t(32)),s=t.n(r),l=t(108),u=t(15),d=t(109),j=t(103),h=t(106),b=t(105),f=t(101),O=t(104),p=t(107),v=t(102),g=t(52),m=t(99),w=Object(m.a)({table:{width:900,marginTop:50,margin:"auto"}}),x=t(3);function k(e){var n=function(e){var n=Object(c.useState)([]),t=Object(u.a)(n,2),o=t[0],a=t[1];return Object(c.useEffect)((function(){g.get("https://bmtools.arup.com/calcs/api/mechanical/pwadata/".concat(e.account.userName)).then((function(e){a(e.data.calcs)}))}),[]),{myCalcs:o,completeCalc:function(e){window.open("https://bmtools.arup.com/calcs/mechanical/project/".concat(e.ProjectCode),"_blank")}}}(e.userData),t=n.myCalcs,o=n.completeCalc,a=w();return console.log(t),Object(x.jsx)("div",{children:Object(x.jsx)(f.a,{component:v.a,className:a.table,children:Object(x.jsxs)(j.a,{children:[Object(x.jsxs)(O.a,{children:[Object(x.jsx)(b.a,{children:"Calculation Name"}),Object(x.jsx)(b.a,{children:"Project Name"}),Object(x.jsx)(b.a,{children:"Project Number"}),Object(x.jsx)(b.a,{children:"Stage"}),Object(x.jsx)(b.a,{})]}),Object(x.jsx)(h.a,{children:t.map((function(e){return Object(x.jsxs)(p.a,{children:[Object(x.jsx)(b.a,{children:e.calculation}),Object(x.jsx)(b.a,{children:e.JobNameShort}),Object(x.jsx)(b.a,{children:e.ProjectCode}),Object(x.jsx)(b.a,{children:e.stage}),Object(x.jsx)(b.a,{children:Object(x.jsx)(l.a,{variant:"contained",onClick:function(){return o(e)},children:"Complete Calc"})})]},e.calculation_id)}))})]})})})}var C=Object(m.a)({});function N(){var e=function(){var e=Object(c.useState)(!1),n=Object(u.a)(e,2),t=n[0],o=n[1],a=Object(c.useState)(!1),i=Object(u.a)(a,2),r=i[0],s=i[1],l=Object(c.useState)([]),j=Object(u.a)(l,2),h=j[0],b=j[1];Object(c.useEffect)((function(){console.log("User Data: ",h)}),[]),setInterval((function(){Object(d.a)(new Date,new Date(2021,8,16,15,15,30))&&o(!0)}),1e3);var f=function(){Notification.requestPermission().then((function(){new Notification("You have 4 new calculations to complete, click to view").onclick=function(e){e.preventDefault(),window.open("https://bmtools.arup.com/calcs/mechanical/project/demo","_blank")}}))};return Object(c.useEffect)((function(){t&&(console.log("timed notification"),f(),o(!1))}),[t]),{handleNotification:f,loggedIn:r,authHandler:function(e,n){console.log(e,n),n&&(b(n),s(!0))},userData:h}}(),n=e.handleNotification,t=e.loggedIn,o=e.authHandler,a=e.userData;C();return Object(x.jsxs)("div",{children:[!t&&Object(x.jsx)(s.a,{clientId:"2b4cf606-ac2c-4532-a7b0-483d7f2427cc",authCallback:o}),t&&Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Arup Hub"}),Object(x.jsx)(l.a,{variant:"contained",onClick:n,children:"Send me a Notification"}),Object(x.jsx)(k,{userData:a})]})]})}var S=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(N,{})})},D=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,111)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),c(e),o(e),a(e),i(e)}))},y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all "),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(S,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");y?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var c=t.headers.get("content-type");404===t.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service ")}))):P(n,e)}))}}(),D()}},[[77,1,2]]]);
//# sourceMappingURL=main.419b9f54.chunk.js.map